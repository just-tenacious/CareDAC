{% load static %}

<nav class="navbar navbar-expand-lg navbar-light bg-light navbar-custom">
  <div class="container-fluid d-flex justify-content-between align-items-center">

    <!-- Left Pane -->
    <div class="left-pane d-flex align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
        <img src="{% static 'home/images/logo.png' %}" alt="CareDAC Logo" height="40" class="me-2">
      </a>
      <div class="location-box ms-3">
        <div class="location-heading">Your Location</div>
        <span>New York, USA</span>
      </div>
    </div>

    <!-- Right Pane -->
    <div class="right-pane d-flex align-items-center">

      <!-- Nav Links -->
      <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'home' %}">Home</a>
      <a class="nav-link {% if request.resolver_match.url_name == 'appointment' %}active{% endif %}" href="{% url 'appointment' %}">Appointment</a>
      <a class="nav-link {% if request.resolver_match.url_name == 'payment' %}active{% endif %}" href="{% url 'payment' %}">Payments</a>

      <!-- Language Dropdown -->
      <div class="dropdown ms-3">
        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
          <img src="https://flagcdn.com/us.svg" class="flag-icon" alt="English">
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#"><img src="https://flagcdn.com/us.svg" class="flag-icon me-1"> English</a></li>
          <li><a class="dropdown-item" href="#"><img src="https://flagcdn.com/th.svg" class="flag-icon me-1"> Thai</a></li>
          <li><a class="dropdown-item" href="#"><img src="https://flagcdn.com/in.svg" class="flag-icon me-1"> Malayalam</a></li>
          <li><a class="dropdown-item" href="#"><img src="https://flagcdn.com/id.svg" class="flag-icon me-1"> Indonesian</a></li>
        </ul>
      </div>

      <!-- Search Box -->
      <div class="search-container d-flex align-items-center ms-3">
        <input type="text" id="searchBox" class="form-control search-input me-2" placeholder="Search..." />
        <button id="searchBtn" class="btn btn-outline-secondary">üîç</button>
      </div>

      <!-- Profile Dropdown -->
      <div class="dropdown ms-3">
        <button class="btn profile-btn d-flex align-items-center" type="button" data-bs-toggle="dropdown">
          <i class="bi bi-person-circle me-1"></i> User
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#"><i class="bi bi-person me-1"></i> Profile</a></li>
          <li><a class="dropdown-item" href="{% url 'reset_password' %}"><i class="bi bi-key me-1"></i> Change Password</a></li>
          <li><a class="dropdown-item text-danger" href="{% url 'login' %}"><i class="bi bi-box-arrow-right me-1"></i> Logout</a></li>
        </ul>
      </div>

    </div>
  </div>
</nav>

<style>
  .navbar .nav-link.active {
    color: #0d6efd !important;
    font-weight: 600;
    border-bottom: 2px solid #0d6efd;
  }

  /* Expandable Search */
  .search-input {
    width: 0;
    opacity: 0;
    transition: width 0.4s ease, opacity 0.4s ease;
    overflow: hidden;
  }
  .search-input.show {
    width: 180px;
    opacity: 1;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const searchBtn = document.getElementById("searchBtn");
    const searchBox = document.getElementById("searchBox");

    searchBtn.addEventListener("click", function () {
      searchBox.classList.toggle("show");
      if (searchBox.classList.contains("show")) {
        searchBox.focus();
      } else {
        searchBox.value = "";
      }
    });
  });
</script>
